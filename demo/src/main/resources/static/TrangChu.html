<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/styles.css" />
    <style>
      /* Phần CSS hiện có */

      /* Phần chính của nội dung để đẩy footer xuống */

      /*main*/
      .main {
        display: flex;
        /* justify-content: center; /* Căn giữa theo chiều ngang */
        align-items: center;
        flex-direction: column;
        flex-grow: 1; /* Chiếm không gian còn lại của trang */
        /* Căn giữa văn bản trong các phần tử */
      }
      .p1 {
        margin-top: 10px;
        background-color: white;
        height: 280px;
        width: 1200px;
        display: flex;
      }
      .ps1 {
        margin-top: 15px;
        height: 250px;
        width: 700px;
        background-color: white;
      }
      .ps2 {
        margin-top: 15px;
        margin-left: 15px;
        height: 250px;
        width: 485px;
        background-color: white;
      }
      .ps2 img {
        display: block;
        margin: 0; /* Xóa khoảng cách margin mặc định */
        padding: 0; /* Xóa khoảng cách padding mặc định */
      }
      .p2 {
        margin-top: 30px;
        background-color: rgb(220, 41, 41)  ;
        flex-direction: column;
        height: 300px;
        width: 1200px;
        display: flex; /* Kích hoạt Flexbox cho .p2 */
        justify-content: center; /* Căn giữa theo chiều dọc khi không thay đổi flex-direction */
        text-align: center; /* Căn giữa theo chiều ngang */
      }
      .p3 {
        margin-top: 10px;
         background-color: white; 
        border: 1px solid color(grey);
        height: 750px;
        width: 1200px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden; /* Thêm dòng này để tránh tràn nội dung */
      }
      .p3s1 {
         background-color: rgb(220, 41, 41); 
        height: 50px;
        width: 1200px;    
        display: flex;
        justify-content: space-between;
      }
      .p3s1 div {
        display: flex;
        align-items: center;
        height: 100%;
        font-size: 25px;
      }
      .p3s11 {
        margin-left: 10px;
        color: white;
      }
      

      .p3s2 {
        background-color: white;
        width: 1200px;
        height: 340px;
        display: flex;
        margin-top: 2px;
      }

      .i4-comic {
        height: 320px;
        width: 230px;
        background-color: white;
        margin-top: 10px;
        margin-left: 8px;
        display: flex;
        flex-direction: column; /* Để đảm bảo các phần tử xếp theo cột */
        align-items: center; /* Căn giữa theo chiều ngang */
        justify-content: center; /* Căn giữa theo chiều dọc */
        justify-content: flex-start; /* Giữ các phần tử căn trên cùng */
        text-align: center; /* Căn giữa nội dung văn bản */
      }
      .i4-comic img {
        margin-top: 10px;
      }
      .name-comics,
      .price-comics {
        color: rgb(21, 21, 21);
        text-align: left;
        margin-top: 5px;
      }
      .price-comics {
        color: red;
      }
      a {
        text-decoration: none;
      }
      .i4-comic:hover {
        border: 2px solid rgb(235, 229, 229); /* Tạo khung có độ dày 2px màu xanh */
      }
      .name-comics {
        color: rgb(21, 21, 21);
        text-align: left;
        margin-top: 5px;
        max-width: 190px; /* Giới hạn độ rộng để đảm bảo căn giữa */
      }
      a{
          color: black;
          cursor: pointer;
          text-decoration: none;
        }
         a:hover{
          color: red;
        }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="header"></div>

      <main class="main">
        <div class="p1">
          <div class="ps1">
            <img src="" alt="" id="myImage" height="250px" width="700px" />
          </div>
          <div class="ps2">
            <div class="ps2-top">
              <img src="" alt="" height="125px" width="485px" />
            </div>
            <div class="ps2-bottom">
              <img src="" alt="" height="125px" width="485px" />
            </div>
          </div>
        </div>
        <div class="p2">Flash Sale</div>
        <div class="p3">
          <div class="p3s1">
            <div class="p3s11">Bán chạy</div>
            
          </div>
          <div class="p3s2">
            <div class="i4-comic">
              <a id="comic-link-1">
                <img src="" alt="Comic image" id="comic-image-1" />
                <div class="name-comics" id="comic-name-1"></div>
                <div class="price-comics" id="comic-price-1"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-2">
                <img src="" alt="Comic image" id="comic-image-2" />
                <div class="name-comics" id="comic-name-2"></div>
                <div class="price-comics" id="comic-price-2"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-3">
                <img src="" alt="Comic image" id="comic-image-3" />
                <div class="name-comics" id="comic-name-3"></div>
                <div class="price-comics" id="comic-price-3"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-4">
                <img src="" alt="Comic image" id="comic-image-4" />
                <div class="name-comics" id="comic-name-4"></div>
                <div class="price-comics" id="comic-price-4"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-5">
                <img src="" alt="Comic image" id="comic-image-5" />
                <div class="name-comics" id="comic-name-5"></div>
                <div class="price-comics" id="comic-price-5"></div>
              </a>
            </div>
          </div>
          <div class="p3s2">
            <div class="i4-comic" id="img1">
              <a id="comic-link-6">
                <img src="" alt="Comic image" id="comic-image-6" />
                <div class="name-comics" id="comic-name-6"></div>
                <div class="price-comics" id="comic-price-6"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-7">
                <img src="" alt="Comic image" id="comic-image-7" />
                <div class="name-comics" id="comic-name-7"></div>
                <div class="price-comics" id="comic-price-7"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-8">
                <img src="" alt="Comic image" id="comic-image-8" />
                <div class="name-comics" id="comic-name-8"></div>
                <div class="price-comics" id="comic-price-8"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-9">
                <img src="" alt="Comic image" id="comic-image-9" />
                <div class="name-comics" id="comic-name-9"></div>
                <div class="price-comics" id="comic-price-9"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-10">
                <img src="" alt="Comic image" id="comic-image-10" />
                <div class="name-comics" id="comic-name-10"></div>
                <div class="price-comics" id="comic-price-10"></div>
              </a>
            </div>
          </div>
        </div>
        <div class="p3" style="margin-top: 10px">
          <div class="p3s1">
            <div class="p3s11">Truyện tranh mới</div>
            
          </div>
          <div class="p3s2">
            <div class="i4-comic">
              <a id="comic-link-11">
                <img src="" alt="Comic image" id="comic-image-11" />
                <div class="name-comics" id="comic-name-11"></div>
                <div class="price-comics" id="comic-price-11"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-12">
                <img src="" alt="Comic image" id="comic-image-12" />
                <div class="name-comics" id="comic-name-12"></div>
                <div class="price-comics" id="comic-price-12"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-13">
                <img src="" alt="Comic image" id="comic-image-13" />
                <div class="name-comics" id="comic-name-13"></div>
                <div class="price-comics" id="comic-price-13"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-14">
                <img src="" alt="Comic image" id="comic-image-14" />
                <div class="name-comics" id="comic-name-14"></div>
                <div class="price-comics" id="comic-price-14"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-15">
                <img src="" alt="Comic image" id="comic-image-15" />
                <div class="name-comics" id="comic-name-15"></div>
                <div class="price-comics" id="comic-price-15"></div>
              </a>
            </div>
          </div>
          <div class="p3s2">
            <div class="i4-comic">
              <a id="comic-link-16">
                <img src="" alt="Comic image" id="comic-image-16" />
                <div class="name-comics" id="comic-name-16"></div>
                <div class="price-comics" id="comic-price-16"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-17">
                <img src="" alt="Comic image" id="comic-image-17" />
                <div class="name-comics" id="comic-name-17"></div>
                <div class="price-comics" id="comic-price-17"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-18">
                <img src="" alt="Comic image" id="comic-image-18" />
                <div class="name-comics" id="comic-name-18"></div>
                <div class="price-comics" id="comic-price-18"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-19">
                <img src="" alt="Comic image" id="comic-image-19" />
                <div class="name-comics" id="comic-name-19"></div>
                <div class="price-comics" id="comic-price-19"></div>
              </a>
            </div>
            <div class="i4-comic">
              <a id="comic-link-20">
                <img src="" alt="Comic image" id="comic-image-20" />
                <div class="name-comics" id="comic-name-20"></div>
                <div class="price-comics" id="comic-price-20"></div>
              </a>
            </div>
          </div>
        </div>
      </main>
      <!-- Footer -->
      <div id="footer"></div>
    </div>
    <script src="js/Header.js"></script>
    <script>
     

function formatPrice(price) {
    return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

    //////////////////////////
      /*------------------*/
    
   
      document.addEventListener("DOMContentLoaded", function () {
  // Gọi API để lấy dữ liệu các truyện tranh bán chạy nhất
  fetch("http://localhost:8080/comics/top10byslb") // Đường dẫn tới API Spring Boot của bạn
    .then((response) => response.json()) // API trả về dữ liệu dạng JSON
    .then((data) => {
      console.log("Dữ liệu từ API:", data); // Kiểm tra dữ liệu trong console

      // Duyệt qua dữ liệu truyện tranh trả về từ API
      data.forEach((comic, index) => {
        if (index < 10) {
          // Gán các phần tử HTML dựa trên `id`
          const comicImage = document.getElementById(`comic-image-${index + 1}`);
          const comicName = document.getElementById(`comic-name-${index + 1}`);
          const comicPrice = document.getElementById(`comic-price-${index + 1}`);
          const comicLink = document.getElementById(`comic-link-${index + 1}`);

          // Đảm bảo các phần tử tồn tại
          if (comicImage && comicName && comicPrice && comicLink) {
            comicImage.src = comic.url || "default-image.png"; // Nếu không có URL, dùng ảnh mặc định
            comicName.innerText = comic.name;
            comicPrice.innerText = `${formatPrice(comic.price)} VND`;

            // Thêm ID của truyện vào URL để chuyển hướng đúng sản phẩm
            comicLink.href = `ChiTietSP.html?id=${comic.id}`;
          }
        }
      });
    })
    .catch((error) => {
      console.error("Lỗi khi lấy dữ liệu từ API:", error);
    });
});

      /*---------------------------------------------------------------------------*/
      document.addEventListener("DOMContentLoaded", function () {
        // Gọi API để lấy dữ liệu các truyện tranh bán chạy nhất
        fetch("http://localhost:8080/comics/top10byid") // Đường dẫn tới API Spring Boot của bạn
          .then((response) => response.json()) // API trả về dữ liệu dạng JSON
          .then((data) => {
            console.log("Dữ liệu từ API:", data); // Kiểm tra dữ liệu trong console

            // Duyệt qua dữ liệu truyện tranh trả về từ API
            data.forEach((comic, index) => {
              // Giới hạn chỉ lấy 8 comic
              if (index < 10) {
                // Đảm bảo phần tử có tồn tại để tránh lỗi
                const comicImage = document.getElementById(
                  `comic-image-${index + 11}`
                );
                const comicName = document.getElementById(
                  `comic-name-${index + 11}`
                );
                const comicPrice = document.getElementById(
                  `comic-price-${index + 11}`
                );
                const comicLink = document.getElementById(`comic-link-${index + 11}`);
                if (comicImage && comicName && comicPrice) {
                  // Gán giá trị từ API vào các thẻ HTML
                  comicImage.src = comic.url || "default-image.png"; // Nếu không có URL, dùng ảnh mặc định
                  comicName.innerText = comic.name;
                  comicPrice.innerText = `${formatPrice(comic.price)} VND`;
                  // Thêm ID của truyện vào URL để chuyển hướng sang trang CTSP
                  comicLink.href = `ChiTietSP.html?id=${comic.id}`;
                }
              }
            });
          })
          .catch((error) => {
            console.error("Lỗi khi lấy dữ liệu từ API:", error);
          });
      });
      /*---------------------------------*/
   

      //------------------------
    </script>
    
  </body>
</html>
